<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-mail></title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        input,
        button {
            padding: 8px;
            margin-right: 10px;
        }

        #message {
            margin-top: 10px;
            font-weight: bold;
        }
    </style>
  </head>
  <body>
        // copied from class notes

    <h2>ì´ë©”ì¼ ë“±ë¡</h2>

    <form>
        <!-- ì´ë©”ì¼ ì…ë ¥ í•„ë“œ -->
        <input type="email" id="emailInput" placeholder="ì´ë©”ì¼ ì…ë ¥" required>

        <!-- ë“±ë¡ ë²„íŠ¼ -->
        <button type="button" onclick="checkEmail()">ë“±ë¡</button>
    </form>

    <!-- ë©”ì‹œì§€ ì¶œë ¥ -->
    <div id="message"></div>

    <script>
        // í´ë˜ìŠ¤ ë‚´ë¶€ - set, get
        // ì»¬ë ‰ì…˜ ê°ì²´ - Set(), Map() -> ver.ES6
        // ğŸ”¹ 1. ê¸°ì¡´ ë“±ë¡ëœ ì´ë©”ì¼ ëª©ë¡ì„ Setìœ¼ë¡œ ê´€ë¦¬
        const registeredEmails = new Set();
        console.log('registeredEmails=' + registeredEmails);

        // ğŸ”¹ 2. ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
        function checkEmail() {
            // ğŸ“Œ 1. ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
            const input = document.getElementById("emailInput");
            const email = input.value.trim().toLowerCase(); // ê³µë°± ì œê±° + ì†Œë¬¸ìë¡œ í†µì¼

            const messageDiv = document.getElementById("message");

            // ğŸ“Œ 2. ì…ë ¥ê°’ì´ ë¹„ì—ˆëŠ”ì§€ í™•ì¸
            if (email === "") {
                messageDiv.textContent = "ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.";
                messageDiv.style.color = "red";
                // í˜„ì¬ í•¨ìˆ˜ë¥¼ ë²—ì–´ë‚œë‹¤.
                return;
            }

            // ğŸ“Œ 3. ì¤‘ë³µ ì²´í¬
            // ê°ì²´.has(ê°’) -> ê°ì²´ê°€ ê°’ì„ ê°€ì§€ê³  ìˆìœ¼ë©´ true, ì•„ë‹ˆë©´ false
            if (registeredEmails.has(email)) {
                messageDiv.textContent = "âŒ ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.";
                messageDiv.style.color = "red";
            } else {
                // ê°ì²´.add(ê°’) -> ê°ì²´ì— ê°’ì„ ì¶”ê°€
                registeredEmails.add(email); // Setì— ì¶”ê°€
                messageDiv.textContent = "âœ… ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.";
                messageDiv.style.color = "green";
                input.value = ""; // ì…ë ¥ì°½ ì´ˆê¸°í™”
            }

            // ğŸ” ì½˜ì†”ì—ì„œë„ í™•ì¸ ê°€ëŠ¥
            console.log("í˜„ì¬ ë“±ë¡ëœ ì´ë©”ì¼ ëª©ë¡:", Array.from(registeredEmails));
        }
    </script>

</body>

</html>

<!--     <h2>E-mail ë“±ë¡</h2>
    <form>
      <input type="email" id ="enmailInput" placeholder="input email" />
      <button type="submit"  onclick="checkEmail" >ë“±ë¡</button>
    </form>
    <script>
      //(ES6~) ì»¬ë ‰ì…˜ ê°ì²´ - Set(), Map()
      // 1. ê¸°ì¡´ ë“±ë¡ëœ ì´ë©”ì¼ ëª©ë¡ì„ Setìœ¼ë¡œ ê´€ë¦¬

      const registeredEmails = new Set();

      // 2. ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
      function checkEmail(){
        // 1. ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
        const input = document.getElementById("emailInput");
        const email = input.value.trim().toLowerCase();

        const messageDiv.style.color = 'red';
        return;

        //2. ì…ë ¥ê°’ì´ ë¹„ì—ˆëŠ”ì§€ í™•ì¸
        if (email ===""){
          messageDiv.textContent = 'ì—ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.';
          messageDiv.style.color = "blue";
          return;

          // 3. ì¤‘ë³µ ì²´í¬
          // OBJ.has(value) -> ê°ì²´ê°€ ê°’ì„ ê°€ì§€ê³  ìˆìœ¼ë©´ true, otherwise false
          if(registeredEmails.has(email)){
            messageDiv.tectContent = " ì´ë¯¸ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.";
            messageDiv.style.color = "green";
            input.value = ""; // ì…ë ¥ì°½ ì´ˆê¸°í™”
          }
        }
      } 
    </script>
  </body>
</html> -->
